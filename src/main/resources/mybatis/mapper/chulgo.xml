<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="chulgo">

	<!-- 출고 조회 -->
	<select id="getChulgoList" parameterType="chulgo"
		resultType="chulgo">
		SELECT
		OCH_CODE, OCH_NO,
		CONVERT(char(10), ORD_DATE, 23) as ORD_DATE,
		CONVERT(char(10), OCH_DATE, 23) as OCH_DATE,
		OCH_SU, ROUND(OCH_AMNT,1) AS OCH_AMNT, OCH_NAME, OCH_BIGO, OCH_PRN, OCH_MON,
		OCH_LOT,
		ORDERT.ORD_CODE,
		PROD_GUBN, PROD_NAME, PROD_NO, PROD_JAI, PROD_GYU, PROD_DANW,
		OCH_DANG, PROD_DANJ,
		CORP_NAME, TECH_TE, OCH_MA, CORP_GYUL2
		FROM OCHULGO -- 여기서 부터 WHERE 종료 부분까지는 공통
		INNER JOIN ORDERT ON ORDERT.ORD_CODE = OCHULGO.ORD_CODE
		INNER JOIN PRODUCT ON PRODUCT.PROD_CODE = ORDERT.PROD_CODE
		INNER JOIN CORP ON CORP.CORP_CODE = PRODUCT.CORP_CODE
		INNER JOIN TECHIN ON TECHIN.TECH_NO = PRODUCT.TECH_NO
		<where>
			OCH_CODE != 0
			AND OCH_DATE BETWEEN #{dateS}+' 00:00:00' AND #{dateE}+' 23:59:59'
			<if test="OCH_DATE != null">
				AND OCH_DATE = #{OCH_DATE}
			</if>
			<if test="prodGubn != '전체'">
				AND PROD_GUBN = #{prodGubn}
			</if>
			<if test="OCH_CODE != null">
				AND OCH_CODE like #{OCH_CODE}
			</if>
			<if test="OCH_NO != null">
				AND OCH_NO like #{OCH_NO}
			</if>
			<if test="ORD_CODE != null">
				AND ORDERT.ORD_CODE like '%'+#{ORD_CODE}+'%'
			</if>
			<if test="CORP_NAME != null">
				AND CORP_NAME like '%'+#{CORP_NAME}+'%'
			</if>
			<if test="PROD_NAME != null">
				AND PROD_NAME like '%'+#{PROD_NAME}+'%'
			</if>
			<if test="PROD_NO != null">
				AND PROD_NO like '%'+#{PROD_NO}+'%'
			</if>
			<if test="PROD_JAI != null">
				AND PROD_JAI like '%'+#{PROD_JAI}+'%'
			</if>
			<if test="PROD_GYU != null">
				AND PROD_GYU like '%'+#{PROD_GYU}+'%'
			</if>
			<if test="PROD_DANW != null">
				AND PROD_DANW like '%'+#{PROD_DANW}+'%'
			</if>
			<if test="OCH_SU != null">
				AND OCH_SU = #{OCH_SU}
			</if>
			<if test="OCH_AMNT != null">
				AND OCH_AMNT = #{OCH_AMNT}
			</if>
			<if test="PROD_DANJ != null">
				AND PROD_DANJ = #{PROD_DANJ}
			</if>
			<if test="PROD_DANG != null">
				AND PROD_DANG = #{PROD_DANG}
			</if>
			<if test="OCH_NAME != null">
				AND OCH_NAME like '%'+#{OCH_NAME}+'%'
			</if>
			<if test="OCH_BIGO != null">
				AND OCH_BIGO like '%'+#{OCH_BIGO}+'%'
			</if>
			<if test="OCH_PRN != null">
				AND OCH_PRN like '%'+#{OCH_PRN}+'%'
			</if>
			<if test="OCH_LOT != null">
				AND OCH_LOT like '%'+#{OCH_LOT}+'%'
			</if>
			<if test="TECH_TE != null">
				AND TECH_TE like '%'+#{TECH_TE}+'%'
			</if>
		</where>

	</select>



</mapper>